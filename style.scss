/**
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this plugin in the file LICENSE.md.
 * It is also available through the world-wide-web at this URL:
 * https://opensource.org/licenses/OSL-3.0
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade the plugin to
 * newer versions in the future. If you wish to customize the plugin for
 * your needs please document your changes and make backups before you update.
 *
 *
 * @copyright Copyright (c) 2020 GriefMoDz
 * @license   OSL-3.0 (Open Software License ("OSL") v. 3.0)
 * @link      https://github.com/GriefMoDz/better-status-indicators
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

/** General **/
.bsi-clientStatuses svg {
  color: var(--channels-default);
  margin-left: 4px;
}

.peopleListItem-2nzedh .userInfo-2zN2z8 {
  .bsi-clientStatuses {
    visibility: hidden;
  }

  &.hovered-15FzL3 .bsi-clientStatuses {
    visibility: visible;
  }
}

$statuses: (
  "online",
  "idle",
  "dnd",
  "streaming"
);

@mixin avatarStatusCutout ($width: 32, $height: 10px, $x: 22, $y: 22, $avatar-status: false, $mask: avatar-default) {
  @each $status in $statuses {
    .wrapper-3t9DeA foreignObject[width='#{$width}'][data-bsi-mobile-avatar-status='#{$avatar-status}'][data-bsi-status='#{$status}'] {
      &:not([mask*='#{$mask}']) {
        mask: url(#svg-mask-avatar-status-round-#{$width});
      }

      + rect {
        mask: url(#svg-mask-status-#{$status});
        height: $height;
        x: $x;
        y: $y; 
      }
    }
  }
}

@include avatarStatusCutout();
@include avatarStatusCutout(80, 16px, 60, 60);

/** Theme Compatibility **/

/* Settings Icons */
.side-8zPYf6 > .item-PXvHYJ[data-item-id='better-status-indicators'] {
  white-space: initial;
}

/* Radial Status */
$status-colors: (
  "online": #43b581,
  "idle": #faa61a,
  "dnd": #f04747,
  "offline": #636b75,
  "streaming": #643da7
);

@each $status, $color in $status-colors {
  .wrapper-3t9DeA foreignObject[mask*='mobile'][data-bsi-status='#{$status}']:after {
    background: var(--rs-#{$status}-color, #{$color}) !important;
  }
}

/** Settings **/
.bsi-settings {
  &-title {
    margin-bottom: 20px;
  }

  &-tab-bar {
    background-color: var(--background-secondary);
    padding: 8px 10px;
    border-radius: 25px;
    margin-bottom: 25px;
    margin-left: -5px;
  }

  &-title + &-status-display-title {
    margin: 0 0 8px 0;
  }

  &-status-display-title {
    margin: 40px 0 8px 0;
  }
}

/* Status Picker Preview */
#bsi-status-picker {
  width: auto;

  .description-2L932D, .status-1fhblQ {
    display: initial;
  }

  &+ .divider-3573oO {
    margin-bottom: 20px;
  }
}
